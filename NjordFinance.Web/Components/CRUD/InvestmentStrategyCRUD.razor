@inherits ModelCRUD<InvestmentModelTargetViewModel>

@if(Model is null)
{
    <LoadingSvg />
}
else
{
    <ModelForm TModel="InvestmentModelTargetViewModel">
        <ModelFormLineItem MemberName="@nameof(InvestmentStrategy.DisplayName)" >
                @Model.ParentObject.DisplayName
        </ModelFormLineItem>
        <ValidationMessage For=@(() => Model.SumOfMemberWeights) />
    </ModelForm>
    <DataGrid Data="@Model.MemberEntries">
        <DataGridColumn 
            Property=@nameof(InvestmentStrategyTarget.AttributeMemberId)
            Caption=@(NameFor<InvestmentStrategyTarget>(nameof(InvestmentStrategyTarget.AttributeMemberId)))>
            <CellEditTemplate Context="model">
                <InputSelect class="form-control" @bind-Value=model.AttributeMemberId />
            </CellEditTemplate>
        </DataGridColumn>
        <DataGridColumn 
            Property=@nameof(InvestmentStrategyTarget.Weight)
            Caption=@(NameFor<InvestmentStrategyTarget>(nameof(InvestmentStrategyTarget.Weight)))>
            <CellEditTemplate Context="model">
                <InputNumber class="form-control" @bind-Value=model.Weight />
            </CellEditTemplate>
        </DataGridColumn>
    </DataGrid>
}

@code{
    [Parameter]
    public IEnumerable<LookupModel> AttributeMemberLookup { get; set; }
}